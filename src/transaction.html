@@include('partials/main.html')

<head>
    @@include("partials/title-meta.html", {"title": "Transaksi"})

    @@include('partials/head-css.html')
</head>

<body>

<div class="wrapper">

    @@include('partials/sidenav.html')

    <!-- Start Page Content here -->
    <div class="page-content">

        @@include('partials/topbar.html')

        <main>

            @@include("partials/page-title.html", {"subtitle":"Integrasi","title":"Transaksi"})

            <div class="grid lg:grid-cols-1 gap-6 mt-8">
                <div class="card overflow-hidden">
                    <div class="card-header flex items-center justify-between">
                        <h4 class="card-title">List Transaksi</h4>
                    </div>
                    <div class="p-4">
                        <div class="overflow-x-auto ">
                            <div class="min-w-full inline-block align-middle">
                                <div class="border rounded-lg overflow-hidden ">
                                    <table class="min-w-full divide-y divide-default-200 custom-scroll">
                                        <thead class="bg-default-50">
                                        <tr>
                                            <th scope="col"
                                                class="px-6 py-3 text-start text-sm text-default-500">
                                                #
                                            </th>
                                            <th scope="col"
                                                class="px-6 py-3 text-start text-sm text-default-500">
                                                Tanggal
                                            </th>
                                            <th scope="col"
                                                class="px-6 py-3 text-start text-sm text-default-500">
                                                Reff ID
                                            </th>
                                            <th scope="col"
                                                class="px-6 py-3 text-start text-sm text-default-500">
                                                Nama Produk
                                            </th>
                                            <th scope="col"
                                                class="px-6 py-3 text-start text-sm text-default-500">
                                                Vendor
                                            </th>
                                            <th scope="col"
                                                class="px-6 py-3 text-start text-sm text-default-500">
                                                Tujuan
                                            </th>
                                            <th scope="col"
                                                class="px-6 py-3 text-start text-sm text-default-500">
                                                Harga
                                            </th>
                                            <th scope="col"
                                                class="px-6 py-3 text-start text-sm text-default-500">
                                                Status
                                            </th>
                                            <th scope="col"
                                                class="px-6 py-3 text-start text-sm text-default-500">
                                                No SN
                                            </th>
                                            <th scope="col" class="px-6 py-3 text-end text-sm text-default-500">
                                                Aksi
                                            </th>
                                        </tr>
                                        </thead>
                                        <tbody class="divide-y divide-default-200">
                                        <tr>
                                            <td
                                                    class="px-6 py-4 whitespace-nowrap text-sm font-medium text-default-800">
                                                1
                                            </td>
                                            <td
                                                    class="px-6 py-4 whitespace-nowrap text-sm font-medium text-default-800">
                                                11/08/2025 11:25:10
                                            </td>
                                            <td
                                                    class="px-6 py-4 whitespace-nowrap text-sm font-medium text-default-800">
                                                2541515421
                                            </td>
                                            <td
                                                    class="px-6 py-4 whitespace-nowrap text-sm font-medium text-default-800">
                                                Free Fire 70 DM
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-default-800">
                                                VSGamers
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-default-800">
                                                082260442004
                                            </td>

                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-default-800">
                                                17.500
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-default-800">
                                                Sukses
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-default-800 sn-cell">
                                                Dana 10.000/082260442004/541154515415
                                            </td>
                                            <td
                                                    class="px-6 py-4 whitespace-nowrap text-end text-sm font-medium">
                                                <button type="button" data-hs-overlay="#modal-two"
                                                        data-reff-id="3221541111111"
                                                        data-product-name="Telkomsel 10GB"
                                                        data-price="35.500"
                                                        data-no-tujuan="082260442004"
                                                        data-status="Sukses"
                                                        data-vendor-name="VSGamers"
                                                        data-code-vendor="TSELF10GB"
                                                        data-price-vendor="34.500"
                                                        data-sn="Tsel 10 GB/082260442004/Sukses"
                                                        data-callback='{"data": "calback", "bo_message": "Transaksi telah diproses oleh BO"}'
                                                        data-webhook='{"data": "webhook", "bo_message": "Transaksi telah diproses oleh BO"}'
                                                        data-bo='{"data": "BO", "bo_message": "Transaksi telah diproses oleh BO"}'
                                                        data-update-harga='{"data": "update Harga", "bo_message": "Transaksi telah diproses oleh BO"}'
                                                        onclick="modalDetailTrx(this)"
                                                        class="btn bg-primary text-white">
                                                    Detail
                                                </button>
                                            </td>
                                        </tr>

                                        <tr>
                                            <td
                                                    class="px-6 py-4 whitespace-nowrap text-sm font-medium text-default-800">
                                                2
                                            </td>
                                            <td
                                                    class="px-6 py-4 whitespace-nowrap text-sm font-medium text-default-800">
                                                11/08/2025 11:30:15
                                            </td>
                                            <td
                                                    class="px-6 py-4 whitespace-nowrap text-sm font-medium text-default-800">
                                                2541515422
                                            </td>
                                            <td
                                                    class="px-6 py-4 whitespace-nowrap text-sm font-medium text-default-800">
                                                Telkomsel 10GB
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-default-800">
                                                VSGamers
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-default-800">
                                                082260442005
                                            </td>

                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-default-800">
                                                35.500
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-default-800">
                                                Sukses
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-default-800 sn-cell">
                                                Tsel 10 GB/082260442005/Sukses
                                            </td>
                                            <td
                                                    class="px-6 py-4 whitespace-nowrap text-end text-sm font-medium">
                                                <button type="button" data-hs-overlay="#modal-two"
                                                        data-reff-id="3221541111112"
                                                        data-product-name="Telkomsel 10GB"
                                                        data-price="35.500"
                                                        data-no-tujuan="082260442005"
                                                        data-status="Sukses"
                                                        data-vendor-name="VSGamers"
                                                        data-code-vendor="TSELF10GB"
                                                        data-price-vendor="34.500"
                                                        data-sn="Tsel 10 GB/082260442005/Sukses"
                                                        data-callback='{"data": "calback", "bo_message": "Transaksi telah diproses oleh BO"}'
                                                        data-webhook='{"data": "webhook", "bo_message": "Transaksi telah diproses oleh BO"}'
                                                        data-bo='{"data": "BO", "bo_message": "Transaksi telah diproses oleh BO"}'
                                                        data-update-harga='{"data": "update Harga", "bo_message": "Transaksi telah diproses oleh BO"}'
                                                        onclick="modalDetailTrx(this)"
                                                        class="btn bg-primary text-white">
                                                    Detail
                                                </button>
                                            </td>
                                        </tr>


                                        </tbody>
                                    </table>
                                </div>

                                <!-- Pagination -->
                                <div class="flex flex-col md:flex-row md:items-center md:justify-between mt-4 gap-2">
                                    <div class="text-sm text-default-500 mb-2 md:mb-0">
                                        Menampilkan <span class="font-semibold text-default-800">1</span> - <span
                                            class="font-semibold text-default-800">10</span> dari <span
                                            class="font-semibold text-default-800">100</span> data
                                    </div>
                                    <div class="flex items-center gap-2">
                                        <button class="btn rounded-full border border-secondary text-secondary hover:bg-primary hover:text-white"
                                                aria-label="Previous">
                                            <i class="i-ph-caret-double-left-bold text-base"></i>
                                        </button>
                                        <button class="btn rounded-full border border-primary text-primary hover:bg-primary hover:text-white font-semibold bg-primary text-white border-primary">
                                            1
                                        </button>
                                        <button class="btn rounded-full border border-secondary text-secondary hover:bg-primary hover:text-white">
                                            2
                                        </button>
                                        <button class="btn rounded-full border border-secondary text-secondary hover:bg-primary hover:text-white">
                                            3
                                        </button>
                                        <button class="btn rounded-full border border-secondary text-secondary hover:bg-primary hover:text-white"
                                                aria-label="Next">
                                            <i class="i-ph-caret-double-right-bold text-base"></i>
                                        </button>
                                    </div>
                                </div>

                                <!-- modal -->
                                <div id="modal-two"
                                     class="hs-overlay w-full h-full fixed top-0 left-0 z-70 transition-all duration-500 overflow-y-auto hidden pointer-events-none">
                                    <div
                                            class="translate-y-10 hs-overlay-open:translate-y-0 hs-overlay-open:opacity-100 opacity-0 ease-in-out transition-all duration-500 sm:max-w-lg sm:w-full my-8 sm:mx-auto flex flex-col bg-white shadow-sm rounded">
                                        <div
                                                class="flex flex-col border border-default-200 shadow-sm rounded-lg  pointer-events-auto">
                                            <div
                                                    class="flex justify-between items-center py-3 px-4 border-b border-default-200">
                                                <h3 class="text-lg font-medium text-default-900">
                                                    Detail Transaksi
                                                </h3>
                                                <button type="button" class="text-default-600 cursor-pointer"
                                                        data-hs-overlay="#modal-two">
                                                    <i class="i-tabler-x text-lg"></i>
                                                </button>
                                            </div>
                                            <div class="p-4 overflow-y-auto" id="modal-content">
                                                <p class="mt-1 text-default-600">
                                                    This is a wider card with supporting text below as a natural lead-in
                                                    to
                                                    additional content.
                                                </p>
                                            </div>
                                            <div
                                                    class="flex justify-end items-center gap-x-2 py-3 px-4 border-t border-default-200">
                                                <button type="button"
                                                        class="btn bg-primary text-white"
                                                        data-hs-overlay="#modal-two">
                                                    <i class="i-tabler-x me-1"></i>
                                                    Close
                                                </button>
                                                <a class="btn bg-primary text-white"
                                                   href="#">
                                                    Save changes
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div> <!-- end card -->
            </div>

        </main>

        @@include('partials/footer.html')

    </div>
    <!-- End Page content -->

</div>

<script>
    // modal
    function modalDetailTrx(button) {
        const ModalId = document.getElementById('modal-two');
        const modalContent = document.getElementById('modal-content');

        const reffId = button.dataset.reffId;
        const productName = button.dataset.productName;
        const price = button.dataset.price;
        const noTujuan = button.dataset.noTujuan;
        const status = button.dataset.status;
        const vendorName = button.dataset.vendorName;
        const codeVendor = button.dataset.codeVendor;
        const priceVendor = button.dataset.priceVendor;
        const sn = button.dataset.sn;
        const logCallback = button.dataset.callback;
        const logWebhook = button.dataset.webhook;
        const logBo = button.dataset.bo;
        const logUpdateHarga = button.dataset.updateHarga;

        ModalId.querySelector('.text-lg').innerText = `Detail Transaksi #${reffId}`;

        modalContent.innerHTML = `
            <div class="mb-4">
              Nama Produk : <strong>${productName}</strong>
            </div>
            <div class="mb-4">
              Harga : <strong>Rp. ${price}</strong>
            </div>
            <div class="mb-4">
              Tujuan : <strong>${noTujuan}</strong>
            </div>
            <div class="mb-4">
              Status : <strong>${status}</strong>
            </div>

            <div class="mb-4">
              Vendor : <strong>${vendorName}</strong>
            </div>
            <div class="mb-4">
              Kode Produk Vendor : <strong>${codeVendor}</strong>
            </div>
            <div class="mb-4">
              Harga Produk Vendor : <strong>Rp ${priceVendor}</strong>
            </div>

            <div class="mb-4">
                <label for="inputSn" class="text-default-800 text-sm font-medium inline-block mb-2">Nomor SN</label>
                <input type="text" id="inputSn" class="form-input" placeholder="Masukkan SN di sini" value="${sn}">
            </div>

            <div class="mb-4">
                <label for="inputCallback" class="text-default-800 text-sm font-medium inline-block mb-2">Log Callback</label>
                <textarea id="inputCallback" class="form-textarea" rows="4">${logCallback}</textarea>
            </div>

            <div class="mb-4">
                <label for="inputWebhook" class="text-default-800 text-sm font-medium inline-block mb-2">Log Webhook</label>
                <textarea id="inputWebhook" class="form-textarea" rows="4">${logWebhook}</textarea>
            </div>

            <div class="mb-4">
                <label for="inputBo" class="text-default-800 text-sm font-medium inline-block mb-2">Log Update Status</label>
                <textarea id="inputBo" class="form-textarea" rows="4">${logBo}</textarea>
            </div>

            <div class="mb-4">
                <label for="inputUpdateHarga" class="text-default-800 text-sm font-medium inline-block mb-2">Log Update Harga</label>
                <textarea id="inputUpdateHarga" class="form-textarea" rows="4">${logUpdateHarga}</textarea>
            </div>
        `;
    }

    // Batasi isi SN di semua cell dengan class sn-cell
    document.querySelectorAll('.sn-cell').forEach(cell => {
        const text = cell.innerText;
        if (text.length > 10) {
            cell.innerText = text.substring(0, 10) + '...';
        }
    });
</script>

@@include('partials/footer-scripts.html')

</body>

</html>